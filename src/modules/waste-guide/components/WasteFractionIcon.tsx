import {useContext} from 'react'
import {View} from 'react-native'
import {Circle, Path, Svg} from 'react-native-svg'
import {IconSize, TestProps} from '@/components/ui/types'
import {FractionCode} from '@/modules/waste-guide/types'
import {DeviceContext} from '@/providers'
import {useTheme} from '@/themes'

type IconConfig = {
  color: string
  hasLightBackground?: boolean
  path: string
}

const fractionIconConfig: Partial<Record<FractionCode, IconConfig>> = {
  [FractionCode.GA]: {
    color: 'black',
    path: 'M7.95466 14.1394V11.0818C7.95466 10.0626 7.28108 9.26988 6.38297 8.93015V5.19304C6.38297 4.62681 6.83203 4.17383 7.28108 4.17383H15.1395C15.7009 4.17383 16.1499 4.62681 16.1499 5.19304V8.93015C15.2518 9.26988 14.5782 10.1758 14.5782 11.0818V14.1394H13.1188V14.0262C13.2311 14.0262 13.2311 13.913 13.2311 13.913C13.2311 13.8886 13.2518 13.8328 13.2822 13.7513C13.393 13.4535 13.6318 12.8122 13.4556 12.101C13.3433 11.648 13.0065 11.3083 12.6697 11.0818C12.6697 10.5156 12.5575 9.49638 12.1084 8.8169C11.9962 8.59041 11.8839 8.47716 11.7716 8.36392C11.8839 7.68444 11.6594 7.00497 10.9858 6.66523C10.7613 6.43874 10.4245 6.3255 10.1999 6.3255L10.0877 6.77848C10.3122 6.77848 10.5367 6.89172 10.8735 7.11822C11.3226 7.34471 11.4348 7.79769 11.4348 8.13743C11.3226 8.02418 11.2103 8.02418 11.0981 8.02418C9.97541 7.91094 9.41409 8.25067 9.0773 8.59041C8.74051 8.93015 8.62825 9.38313 8.74051 9.72287C8.74051 9.94936 8.85278 10.1758 8.96504 10.2891C9.30183 10.4023 9.63862 10.4023 9.97541 10.2891C10.7613 10.1758 11.3226 9.60962 11.6594 9.04339L11.7716 9.15664C12.1084 9.60962 12.2207 10.4023 12.2207 10.9686C11.7716 10.7421 11.2103 10.8553 10.7613 10.9686C10.1999 11.0818 9.75089 11.4216 9.52636 11.7613C9.41409 11.9878 9.41409 12.3275 9.52636 12.6673C9.63862 12.8937 9.75089 13.1202 9.97541 13.1202C10.1999 13.2335 10.5367 13.3467 11.0981 13.1202C11.7716 12.8937 12.333 12.3275 12.6697 11.648C12.782 11.7613 12.8943 11.9878 13.0065 12.3275C13.2311 13.007 12.8943 13.6865 12.8943 13.6865C12.8943 13.7431 12.8662 13.7714 12.8381 13.7997C12.8101 13.828 12.782 13.8563 12.782 13.913C12.782 13.913 12.6697 14.0262 12.6697 14.1394H11.3226H7.95466ZM16.8235 9.26988C17.8339 9.26988 18.5075 9.94936 18.5075 10.8553C18.5075 11.7613 17.9461 12.4408 17.2726 12.554V17.3103C17.2726 18.1031 16.599 18.7825 15.8131 18.7825H6.94429C6.15844 18.7825 5.48486 18.1031 5.48486 17.3103V12.554C4.69901 12.4408 4.1377 11.7613 4.1377 10.8553C4.1377 9.94936 4.81128 9.26988 5.82165 9.38313C6.71976 9.38313 7.50561 10.1758 7.50561 11.0818V14.1395V14.5924L11.3226 14.4792H15.1395V14.0262V10.9686C15.1395 10.0626 15.9254 9.26988 16.8235 9.26988ZM10.5367 8.47716C9.86315 8.47716 9.52636 8.70366 9.41409 8.93015C9.18957 9.15664 9.18957 9.49638 9.18957 9.60962C9.18957 9.72287 9.18957 9.83611 9.30183 9.83611C9.41409 9.94936 9.63862 9.94936 9.97541 9.83611C10.5367 9.72287 11.0981 9.15664 11.3226 8.59041H10.8735C10.7613 8.47716 10.649 8.47716 10.5367 8.47716ZM10.0877 12.554C9.97542 12.3275 9.97542 12.101 10.0877 11.9878C10.1999 11.7613 10.4245 11.5348 10.8735 11.4216C11.0981 11.3083 11.3226 11.3083 11.5471 11.3083C11.7716 11.3083 11.9962 11.3083 12.333 11.4216C12.1084 11.9878 11.5471 12.554 10.9858 12.7805C10.649 12.8937 10.4245 12.8937 10.3122 12.7805C10.2693 12.7372 10.2264 12.7105 10.1898 12.6877C10.1306 12.6507 10.0877 12.624 10.0877 12.554Z',
  },
  [FractionCode.GFT]: {
    color: '#00A03C',
    path: 'M16.3147 17.4371C15.7653 16.9976 14.7764 16.1186 14.6665 15.4593C14.5566 14.5803 14.8862 13.7013 15.2159 13.1519L15.3258 12.9322L15.106 12.7124C14.6665 12.163 14.3369 11.5037 14.3369 11.0642C14.227 10.5148 14.8862 9.41607 15.2159 8.97656L15.5455 8.64692L15.106 8.42717C14.4467 8.09754 13.6776 7.87778 13.0183 7.98766C12.6887 7.98766 12.3591 8.09754 12.0294 8.31729C12.1393 7.87778 12.1393 7.32839 12.0294 6.88888C14.7764 7.10864 14.6665 4.25182 14.6665 4.25182C14.6665 4.25182 11.48 3.48267 11.48 6.779C11.6998 7.21851 11.6998 7.7679 11.5899 8.20741C11.3702 7.98766 11.1504 7.87778 10.8208 7.87778C10.1615 7.7679 9.39236 7.98766 8.7331 8.31729L8.29359 8.53705L8.62322 8.97656C8.84297 9.30619 9.61212 10.405 9.50224 11.0642C9.39236 11.6136 9.17261 12.163 8.7331 12.7124L8.51334 12.9322L8.62322 13.1519C8.95285 13.7013 9.28248 14.5803 9.17261 15.4593C9.06273 16.2285 8.07383 17.1075 7.7442 17.4371L7.30469 17.7668L7.7442 18.0964C8.18371 18.426 8.84297 18.7557 9.39236 18.7557C9.50224 18.7557 9.61212 18.7557 9.83187 18.7557C10.601 18.7557 11.3702 18.5359 12.0294 17.9865C12.7986 18.6458 13.6776 18.8655 14.5566 18.7557C15.106 18.6458 15.7653 18.426 16.2048 18.0964L16.6443 17.7668L16.3147 17.4371Z',
  },
  [FractionCode.Glas]: {
    color: '#FFE600',
    hasLightBackground: true,
    path: 'M13.3163 4.17395V8.09867C14.1885 8.53475 14.7336 9.40692 14.7336 10.3881V17.9105C14.7336 18.3466 14.2975 18.7826 13.8614 18.7826H10.2638C9.82768 18.7826 9.3916 18.3466 9.3916 17.9105V16.2752H12.0081V11.1512H9.3916V10.3881C9.3916 9.40692 9.9367 8.53475 10.8089 8.09867V4.17395H13.3163ZM9.3916 11.6963H11.572V15.8391H9.3916V11.6963Z',
  },
  [FractionCode.Papier]: {
    color: '#004699',
    path: 'M7.07795 7.16753L6.24219 5.73061L12.0926 4.17395L12.6895 5.1319L18.4205 15.0706L11.9732 18.7826L6.24219 8.84394L11.8631 5.60771L11.4956 5.1319L7.07795 7.16753ZM15.6744 12.9152L11.7344 15.1903L12.212 16.1483L16.152 13.8732L15.6744 12.9152ZM14.5999 11.1191L10.6598 13.3942L11.1374 14.3521L15.0774 12.077L14.5999 11.1191ZM10.421 8.7242L8.63009 9.80189L10.1822 12.556L11.9732 11.4783L10.421 8.7242ZM12.9283 8.48471L12.4507 7.52676L11.2568 8.24522L11.7344 9.20317L12.9283 8.48471ZM12.8089 10.9993L14.0029 10.2809L13.5253 9.32291L12.3313 10.0414L12.8089 10.9993Z',
  },
  [FractionCode.Rest]: {
    color: '#767676',
    path: 'M14.0274 4.8807L13.2075 6.53007H11.0992L10.2793 4.17383L14.0274 4.8807ZM17.4242 15.7194L18.3612 16.6619C18.7126 17.1332 18.4783 17.6044 18.2441 18.0757C17.8927 18.6647 17.1899 18.7825 16.4871 18.7825H7.70243C7.58531 18.7825 7.35105 18.6647 7.1168 18.5469L7.11679 18.5469C6.41401 18.0757 6.06263 17.1332 6.29688 16.3085C6.41401 15.8372 6.64827 15.2482 6.88253 14.8947L10.045 13.0097L9.81076 12.5385L6.99966 14.1879L6.88253 13.481V13.2454L7.81956 9.12193C7.8643 9.07693 7.89195 9.03193 7.91557 8.9935C7.95378 8.93131 7.98143 8.88631 8.05382 8.88631L10.7478 7.00131H11.6848L10.2793 9.59318L10.7478 9.8288L12.1533 7.35475L12.8561 8.88631L13.4418 8.65068L12.6219 7.00131H13.5589L14.7302 7.826C15.6672 8.41506 16.37 9.23974 16.9556 10.1822L17.1899 10.5357V10.8891L17.0728 11.4782L14.2617 10.6535L14.1445 11.1247L17.1899 11.9494L18.0098 14.07C18.0098 14.3057 18.0098 14.5413 17.7755 14.6591L17.307 15.1303L15.5501 15.7194L15.6672 16.1907L17.4242 15.7194Z',
  },
  [FractionCode.Textiel]: {
    color: '#E50082',
    path: 'M12.2259 7.50979C10.8455 7.50979 9.69522 6.47453 9.58019 5.09418H14.7565C14.7565 6.47453 13.6062 7.50979 12.2259 7.50979ZM19.5877 6.70459L16.4819 4.51904C16.0218 4.28898 15.5617 4.17395 15.1016 4.17395H14.9866H9.46517H9.35014C8.89002 4.17395 8.4299 4.28898 8.08482 4.51904L4.864 6.70459L4.17383 7.27974L4.51892 8.08494L5.66921 10.2705L6.01429 10.8456L6.70447 10.7306L7.6247 10.6156L7.96979 17.8624V18.7826H8.89002H15.5617H16.4819V17.8624L16.827 10.6156L17.7473 10.7306L18.4374 10.8456L18.7825 10.2705L19.9328 8.08494L20.2779 7.27974L19.5877 6.70459Z',
  },
}

export type WasteFractionIconProps = {
  fractionCode: FractionCode
  scalesWithFont?: boolean
  size?: keyof typeof IconSize
} & TestProps

export const WasteFractionIcon = ({
  fractionCode,
  scalesWithFont = true,
  size = 'lg',
  testID,
}: WasteFractionIconProps) => {
  const {color: colorTokens} = useTheme()
  const {fontScale} = useContext(DeviceContext)
  const scaledSize = IconSize[size] * (scalesWithFont ? fontScale : 1)

  if (!fractionIconConfig[fractionCode]) {
    return <View style={{height: scaledSize, width: scaledSize}} />
  }

  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
  const {color, hasLightBackground, path} = fractionIconConfig[fractionCode]!

  return (
    <Svg
      fillRule="evenodd"
      height={scaledSize}
      testID={testID}
      viewBox="0 0 24 24"
      width={scaledSize}>
      <Circle cx="12" cy="12" fill={color} r="12" />
      <Path
        d={path}
        fill={colorTokens.text[hasLightBackground ? 'default' : 'inverse']}
      />
    </Svg>
  )
}
